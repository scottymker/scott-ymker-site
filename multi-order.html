<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Multi-Student Order – Scott Ymker Photography</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f7f9; --card:#fff; --ink:#111; --muted:#6b7280;
      --accent:#0ea5e9; --border:#e5e7eb; --nav-h:64px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;overflow-x:hidden}
    a{color:inherit;text-decoration:none}
    .wrap{width:min(1100px,calc(100% - 32px));margin:24px auto}

    /* === Header (same as other pages, black hamburger) === */
    .sitebar{position:relative;z-index:10;background:var(--card);border-bottom:1px solid var(--border)}
    .sitebar .inner{height:var(--nav-h);display:flex;align-items:center;justify-content:space-between;gap:16px;padding-inline:10px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700;min-width:0}
    .brand img{height:32px;width:auto}
    .nav-links{display:flex;gap:18px;align-items:center}
    .nav-links a{padding:6px 8px;border-radius:8px;font-weight:500}
    .nav-links a[aria-current="page"]{background:#eef7ff;color:#0b77c5}
    .nav-links a:hover{background:#eff2f6}
    .nav-toggle{
      display:none;border:0;background:transparent;width:40px;height:40px;color:#111 !important;
      -webkit-appearance:none;appearance:none;padding:0;margin:0;
    }
    .nav-toggle svg{width:28px;height:28px;display:block}
    @media (max-width:768px){
      .nav-toggle{display:inline-flex !important;align-items:center;justify-content:center}
      .nav-links{
        position:fixed;left:0;right:0;top:var(--nav-h);
        background:var(--card);border-top:1px solid var(--border);
        flex-direction:column;padding:12px 16px;display:none;pointer-events:none
      }
      .nav-links.open{display:flex;pointer-events:auto}
    }

    /* === Hero & layout (hero same width as cards) === */
    .hero{margin-top:18px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px}
    .hero-card{display:flex;justify-content:space-between;gap:16px;align-items:center}
    .hero h1{margin:0 0 4px;font-size:22px}
    .hero p{margin:0;color:var(--muted)}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);background:#fff;border-radius:999px;padding:10px 14px;font-weight:600;cursor:pointer}
    .btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}

    .grid{display:grid;grid-template-columns:1.25fr .75fr;gap:18px;margin-top:14px}
    @media (max-width:980px){ .grid{grid-template-columns:1fr} }

    .section-title{font-weight:600;margin:10px 0 8px}
    select,input[type="text"],input[type="tel"],input[type="email"]{
      width:100%;height:44px;border:1px solid var(--border);border-radius:10px;padding:10px 12px;font:inherit
    }
    input,select,textarea{font-size:16px} /* prevent iOS zoom */
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:720px){.row{grid-template-columns:1fr}}
    .muted{color:var(--muted)}
    .actions{margin-top:12px;display:flex;align-items:center;gap:12px;flex-wrap:wrap}

    /* === Student blocks === */
    .student{border:1px solid var(--border);border-radius:12px;margin-top:12px;background:#fff}
    .student summary{list-style:none;cursor:pointer;padding:12px 14px;font-weight:600;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;gap:10px}
    .student summary::-webkit-details-marker{display:none}
    .summ-left{flex:0 0 auto}
    .summ-right{flex:1 1 auto;max-width:65%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:right}
    .student .content{padding:12px 14px}
    .student .row{margin-top:10px}
    .addon{display:flex;align-items:center;gap:10px;padding:8px;border:1px solid var(--border);border-radius:10px;margin-bottom:8px;background:#fff}
    .addon input{width:18px;height:18px}
    .btn.small{padding:8px 12px;font-weight:600}
    .btn.rm{color:#ef4444;border-color:#ef4444}

    /* === Summary (contain width, allow wrap/scroll if needed) === */
    #summaryCard{overflow-x:auto}
    table{width:100%;border-collapse:collapse;table-layout:fixed} /* fixed layout prevents overflow */
    th,td{padding:8px;border-bottom:1px solid var(--border);text-align:left;vertical-align:top;word-break:break-word}
    th{color:var(--muted);font-size:13px}
    .total-row td{font-weight:700}
    .subrow td{padding-top:0}
    .sub{color:var(--muted);font-size:13px;line-height:1.35}
    .kv{display:grid;grid-template-columns:140px 1fr;row-gap:6px;column-gap:8px;margin-top:10px}
    .kv .k{color:var(--muted)}
    @media (max-width:420px){ .kv{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="sitebar">
    <div class="wrap inner">
      <div class="brand">
        <img src="2020Logo_black.png" alt="Scott Ymker logo">
        <span>Scott Ymker Photography</span>
      </div>

      <button class="nav-toggle" aria-label="Open menu" aria-controls="site-nav" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <nav id="site-nav" class="nav-links" aria-label="main">
        <a href="index.html">Home</a>
        <a href="multi-order.html" aria-current="page">Order</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </div>

  <!-- Hero (same width & style as cards) -->
  <div class="wrap">
    <section class="hero">
      <div class="card hero-card">
        <div>
          <h1>Multi-Student Order</h1>
          <p>Add each student below. Parent info is shared for one simple checkout.</p>
        </div>
        <div>
          <button id="addStudent" class="btn primary">+ Add another student</button>
        </div>
      </div>
    </section>
  </div>

  <!-- Main -->
  <main class="wrap grid">
    <form id="multiForm" class="card" novalidate>
      <div>
        <div class="section-title">Parent / Guardian</div>
        <input type="text" name="parent_name" placeholder="Parent name" autocomplete="name" required oninput="window.renderSummary && window.renderSummary()" style="margin-bottom:10px">
        <div class="row">
          <input type="tel"  name="parent_phone" placeholder="Phone" inputmode="tel" autocomplete="tel" oninput="window.renderSummary && window.renderSummary()">
          <input type="email" name="parent_email" placeholder="Email" inputmode="email" autocomplete="email" required oninput="window.renderSummary && window.renderSummary()">
        </div>
      </div>

      <div id="students"></div>

      <div class="actions">
        <button type="submit" id="checkout" class="btn primary">Proceed to Checkout</button>
        <span class="muted">You’ll review &amp; pay securely on Stripe.</span>
      </div>
    </form>

    <aside class="card" id="summaryCard">
      <div class="section-title">Order summary</div>
      <table aria-live="polite">
        <thead>
          <tr><th>Description</th><th>Qty</th><th>Amount</th></tr>
        </thead>
        <tbody id="sumItems"></tbody>
        <tfoot>
          <tr class="total-row"><td>Total</td><td></td><td id="sumTotal">$0.00</td></tr>
        </tfoot>
      </table>
      <div class="kv" style="margin-top:12px">
        <div class="k">Parent</div><div id="kvParent">—</div>
        <div class="k">Email</div><div id="kvEmail">—</div>
        <div class="k">Phone</div><div id="kvPhone">—</div>
      </div>
    </aside>
  </main>

  <!-- Nav script + small helpers (non-intrusive) -->
  <script>
    // Mobile hamburger
    document.addEventListener('DOMContentLoaded', () => {
      const toggle = document.querySelector('.nav-toggle');
      const nav = document.getElementById('site-nav');
      if (toggle && nav) {
        const close = () => { nav.classList.remove('open'); toggle.setAttribute('aria-expanded','false'); };
        toggle.addEventListener('click', () => {
          const open = !nav.classList.contains('open');
          nav.classList.toggle('open', open);
          toggle.setAttribute('aria-expanded', String(open));
        });
        nav.querySelectorAll('a').forEach(a => a.addEventListener('click', close));
        document.addEventListener('keydown', e => { if (e.key === 'Escape') close(); });
      }
    });

    // Keep only the student's NAME in each student header (no package/summary blob).
    // This does NOT touch your add-on logic; it only trims visible text.
    function simplifyStudentSummaries(){
      document.querySelectorAll('details.student summary').forEach(sum => {
        const right = sum.querySelector('.summ-right') || sum;
        const raw = right.textContent.trim();
        // Try to extract after ":" and before any of these separators
        let out = raw;
        const colon = raw.indexOf(':');
        if (colon !== -1) out = raw.slice(colon + 1);
        // cut off extra info after separators
        const cuts = ['—',' - ',' (',' | ',' Package '];
        let end = out.length;
        cuts.forEach(c => { const i = out.indexOf(c); if (i !== -1) end = Math.min(end, i); });
        out = out.slice(0, end).trim();
        if (!out) out = raw; // fallback
        right.textContent = out;
      });
    }

    // Re-run simplifier when your JS adds/updates student blocks
    const studentsRoot = document.getElementById('students');
    const obs = new MutationObserver(() => { simplifyStudentSummaries(); });
    if (studentsRoot) obs.observe(studentsRoot, { childList: true, subtree: true });

    // Also run on input changes inside student blocks
    document.addEventListener('input', (e) => {
      if (e.target.closest('details.student')) simplifyStudentSummaries();
    });

    // First pass after load
    document.addEventListener('DOMContentLoaded', () => {
      simplifyStudentSummaries();
      // Keep summary in view (no horizontal overflow)
      const sc = document.getElementById('summaryCard');
      if (sc) sc.scrollLeft = 0;
    });
  </script>

  <!-- Your original page logic (kept intact so add-ons work as before) -->
  <script src="multi-order.js"></script>
</body>
</html>
